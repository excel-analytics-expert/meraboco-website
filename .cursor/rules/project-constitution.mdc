---
description: Project constitution and absolute rules
alwaysApply: true
---

# プロジェクト憲法：絶対遵守事項

## 1. セキュリティ・法規制準拠 (最優先)
- 経済産業省「情報セキュリティ管理基準（平成30年刊）」および「中小企業向け情報セキュリティ対策ガイドライン」に完全準拠すること。
  - 管理基準: https://www.meti.go.jp/policy/netsecurity/downloadfiles/guide_v3.0.pdf
  - 中小企業ガイドライン: https://www.meti.go.jp/policy/netsecurity/sme_guide.html
- 全画面の最下部（フッター）に、上記ガイドラインに準拠している旨の適法な文言と引用リンクを必ず含めること。
- Webhook署名検証、サーバーサイドでの権限チェック、機密情報の秘匿（Management APIキー等）を徹底し、最小権限の原則に従うこと。

## 2. デザイン・操作性指針
- 「温かみのあるプロ仕様のデザイン」を常に反映させる。
- 「ゆったりとしたアニメーション」を重要な指針とし、UXを損なわない範囲で実装する。
- 全体の構成やデザインバランスを崩さないよう、既存のスタイルとの調和を最優先する。

## 3. 実装・コーディングルール
- 不要な署名コード（v0特有のコメント等）は一切含めない。
- 指示された範囲を超えた不必要な変更（オーバーエンジニアリング）は行わない。
- 常に「そのまま貼り付けられるフルコード」で提供すること。
- 既存機能を壊さないよう、差分導入を基本とし、変更時は理由を明確に説明すること。

## 4. ビジネスロジックの前提
- 構成: Next.js (App Router優先) + Stripe + microCMS
- 権限管理: Stripeのサブスクリプション状態（activeのみ編集可能）をDBで管理し、ポータル画面のアクセス制限を行う。
